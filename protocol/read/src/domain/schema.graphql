type DAONetwork @entity {
  id: ID!
  address: Bytes!
  daos: [DAO!] @derivedFrom(field: "network")
}

type DAO @entity {
  id: ID!
  address: Bytes!
  network: DAONetwork!
  name: String!
  reputation: Reputation!
  members: [Member!] @derivedFrom(field: "dao")
  proposals: [ReputationProposal!] @derivedFrom(field: "dao")
}

type Member @entity {
  id: ID!
  address: Bytes!
  dao: DAO!
  reputation: BitInt!
}

type Reputation @entity {
  id: ID!
  address: Bytes!
  dao: DAO
  totalSupply: BitInt!
}

type ReputationProposal @entity {
  id: ID!
  dao: DAO!
  active: Boolean!
  proposer: Bytes!
  beneficiary: Bytes!
  reputationChange: BigInt!
  createdAt: BigInt!
  executedAt: BitInt

  descriptionHash: String!
  title: String
  description: String

  votes: [Vote!] @derivedFrom(field: "proposal")
  votesFor: BigInt!
}

type Vote @entity {
  id: ID!
  createdAt: BigInt!
  voter: Bytes!
  proposal: Proposal!
  dao: DAO!
  reputation: BigInt!
}
